(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9547:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(5155),a=r(2115);let l={UP:{x:0,y:-1},DOWN:{x:0,y:1},LEFT:{x:-1,y:0},RIGHT:{x:1,y:0}},d={IDLE:"idle",RUNNING:"running",PAUSED:"paused",GAME_OVER:"game-over"};function n(){let[e,t]=(0,a.useState)(d.IDLE),[r,n]=(0,a.useState)([{x:10,y:10}]),[i,x]=(0,a.useState)({x:5,y:5}),[o,c]=(0,a.useState)(l.RIGHT),[g,h]=(0,a.useState)(l.RIGHT),[m,y]=(0,a.useState)(0),[b,u]=(0,a.useState)(150),[N,k]=(0,a.useState)(0),f=(0,a.useCallback)(()=>{let e={x:Math.floor(20*Math.random()),y:Math.floor(20*Math.random())};return r.some(t=>t.x===e.x&&t.y===e.y)?f():e},[r]),j=(0,a.useCallback)(()=>{n([{x:10,y:10}]),x(f()),c(l.RIGHT),h(l.RIGHT),y(0),u(150),t(d.RUNNING)},[f]),p=(0,a.useCallback)(r=>{"w"===r.key||"W"===r.key||"ArrowUp"===r.key?o!==l.DOWN&&h(l.UP):"s"===r.key||"S"===r.key||"ArrowDown"===r.key?o!==l.UP&&h(l.DOWN):"a"===r.key||"A"===r.key||"ArrowLeft"===r.key?o!==l.RIGHT&&h(l.LEFT):("d"===r.key||"D"===r.key||"ArrowRight"===r.key)&&o!==l.LEFT&&h(l.RIGHT)," "===r.key&&(e===d.RUNNING?t(d.PAUSED):e===d.PAUSED&&t(d.RUNNING)),"Enter"===r.key&&(e===d.IDLE||e===d.GAME_OVER)&&j()},[o,e,j]);return(0,a.useEffect)(()=>{if(e!==d.RUNNING)return;let r=setInterval(()=>{c(g),n(e=>{let r={...e[0]};if(r.x+=g.x,r.y+=g.y,r.x<0||r.x>=20||r.y<0||r.y>=20||e.some(e=>e.x===r.x&&e.y===r.y))return t(d.GAME_OVER),e;let s=[r,...e];if(r.x===i.x&&r.y===i.y){let e=m+10;y(e),e>N&&k(e),x(f()),b>50&&u(e=>Math.max(50,e-5))}else s.pop();return s})},b);return()=>{clearInterval(r)}},[e,g,i,m,N,b,f]),(0,a.useEffect)(()=>(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}),[p]),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"贪吃蛇"}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("div",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:["分数: ",(0,s.jsx)("span",{className:"text-green-600 dark:text-green-400",children:m})]}),(0,s.jsxs)("div",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:["最高分: ",(0,s.jsx)("span",{className:"text-purple-600 dark:text-purple-400",children:N})]})]})]}),(0,s.jsxs)("div",{className:"relative bg-white dark:bg-gray-700 rounded-xl shadow-2xl overflow-hidden border-4 border-gray-300 dark:border-gray-600",style:{width:"".concat(408,"px"),height:"".concat(408,"px")},children:[(0,s.jsx)("div",{className:"grid grid-cols-20 grid-rows-20",children:(()=>{let e=[];for(let t=0;t<20;t++)for(let a=0;a<20;a++){let l=r[0].x===a&&r[0].y===t,d=r.slice(1).some(e=>e.x===a&&e.y===t),n=i.x===a&&i.y===t,x="border border-gray-100 dark:border-gray-800 ";l?x+="bg-green-600 dark:bg-green-500 rounded-full":d?x+="bg-green-500 dark:bg-green-400 rounded":n?x+="bg-red-500 dark:bg-red-400 rounded-full animate-pulse":x+=(a+t)%2==0?"bg-gray-50 dark:bg-gray-900":"bg-gray-100 dark:bg-gray-800",e.push((0,s.jsx)("div",{className:x,style:{width:"".concat(20,"px"),height:"".concat(20,"px")}},"".concat(a,"-").concat(t)))}return e})()}),e!==d.RUNNING&&(0,s.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center rounded-xl",children:[e===d.IDLE&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"贪吃蛇游戏"}),(0,s.jsx)("p",{className:"text-white mb-2",children:"使用 WASD 或方向键控制"}),(0,s.jsx)("p",{className:"text-white mb-6",children:"按回车开始游戏"}),(0,s.jsx)("button",{className:"px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-full transition duration-200 transform hover:scale-105",onClick:j,children:"开始游戏"})]}),e===d.PAUSED&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"游戏暂停"}),(0,s.jsx)("button",{className:"px-6 py-3 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold rounded-full transition duration-200 transform hover:scale-105",onClick:()=>t(d.RUNNING),children:"继续游戏"})]}),e===d.GAME_OVER&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"游戏结束"}),(0,s.jsxs)("p",{className:"text-xl text-white mb-6",children:["最终分数: ",m]}),(0,s.jsx)("button",{className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-full transition duration-200 transform hover:scale-105",onClick:j,children:"重新开始"})]})]})]}),(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"控制说明"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"WASD 或方向键: 移动"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"空格: 暂停/继续"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"回车: 开始/重新开始"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"游戏规则"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"吃到食物增加分数"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"碰到边界或自身游戏结束"})]})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg transition",onClick:j,children:"重新开始"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white font-medium rounded-lg transition",onClick:()=>t(e===d.PAUSED?d.RUNNING:d.PAUSED),disabled:e===d.IDLE||e===d.GAME_OVER,children:e===d.PAUSED?"继续":"暂停"})]})]})]})})}},9888:(e,t,r)=>{Promise.resolve().then(r.bind(r,9547))}},e=>{e.O(0,[441,255,358],()=>e(e.s=9888)),_N_E=e.O()}]);